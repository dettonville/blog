<!DOCTYPE html>
<html lang="en-us" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='The tutorial section on GitHub deployment 140 describes a rather complex approach using Git subtrees. There are two much simpler approaches which I thought are worth sharing.
This is based on the assumption that you are using a project page (no user or organization page, see here 98 for the difference) and that your remote is called ‚Äúupstream‚Äù.
Publish from /docs folder on master branch As described 48 in the GitHub Pages docs, you can deploy from a folder called docs on your master branch.'><title></title>

<link rel='canonical' href='https://dettonville.github.io/p/'>

<link rel="stylesheet" href="/scss/style.min.0867610fd3b558dff6d70fe8db371a941cdde8714bbda96857533e7efe6f230b.css"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.0.1/styles/a11y-dark.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.0.1/highlight.min.js"></script>
<script>hljs.highlightAll();</script>
<meta property='og:title' content=''>
<meta property='og:description' content='The tutorial section on GitHub deployment 140 describes a rather complex approach using Git subtrees. There are two much simpler approaches which I thought are worth sharing.
This is based on the assumption that you are using a project page (no user or organization page, see here 98 for the difference) and that your remote is called ‚Äúupstream‚Äù.
Publish from /docs folder on master branch As described 48 in the GitHub Pages docs, you can deploy from a folder called docs on your master branch.'>
<meta property='og:url' content='https://dettonville.github.io/p/'>
<meta property='og:site_name' content='Infra Coder'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='og:image' content='https://dettonville.github.io/img/logo.jpg' />
<meta name="twitter:site" content="@lj020326">
    <meta name="twitter:creator" content="@lj020326"><meta name="twitter:title" content="">
<meta name="twitter:description" content="The tutorial section on GitHub deployment 140 describes a rather complex approach using Git subtrees. There are two much simpler approaches which I thought are worth sharing.
This is based on the assumption that you are using a project page (no user or organization page, see here 98 for the difference) and that your remote is called ‚Äúupstream‚Äù.
Publish from /docs folder on master branch As described 48 in the GitHub Pages docs, you can deploy from a folder called docs on your master branch."><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://dettonville.github.io/img/logo.jpg' />
<link rel="icon" href="icons/favicon.ico">
<link rel="icon" type="image/png" href="icons/favicon.png">


    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "dark");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="Toggle Menu">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header class="site-info">
        
            <figure class="site-avatar">
                
                    
                    
                    
                        
                        <img src="/img/avatar_huaabb0978faacaa40734d3cfe1c918d1b_224298_300x0_resize_box_3.png" width="300"
                            height="301" class="site-logo" loading="lazy" alt="Avatar">
                    
                

                
                    <span class="emoji">üç•</span>
                
            </figure>
        
        <h1 class="site-name"><a href="https://dettonville.github.io">Infra Coder</a></h1>
        <h2 class="site-description">A blog about infrastruction automation, including but not limited to platform and pipeline automation, and data analytics but also anything spatial, visual or interesting.</h2>
    </header>

    <ol class="menu" id="main-menu">
        
        
        

        <li >
            <a href='/'>
                
                <span>Home</span>
            </a>
        </li>
        
        

        <li >
            <a href='/archives/'>
                
                <span>Archives</span>
            </a>
        </li>
        
        

        <li >
            <a href='/search/'>
                
                <span>Search</span>
            </a>
        </li>
        
        

        <li >
            <a href='/links/'>
                
                <span>Links</span>
            </a>
        </li>
        

        
            <li id="dark-mode-toggle">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                <span>Dark Mode</span>
            </li>
        
    </ol>
</aside>
<main class="main full-width">
    <article class="main-article">
    <header class="article-header">

    <div class="article-details">
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/p/"></a>
        </h2>
    
        
    </div>

    
    <footer class="article-time">
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-time--reading">
                    4 minute read
                </time>
            </div>
        
    </footer>
    

    
</div>
</header>

    <section class="article-content">
    
    
    <p>The tutorial section on <a class="link" href="http://gohugo.io/tutorials/github-pages-blog/"  target="_blank" rel="noopener"
    >GitHub deployment 140</a> describes a rather complex approach using Git subtrees. There are two much simpler approaches which I thought are worth sharing.</p>
<p>This is based on the assumption that you are using a project page (no user or organization page, <a class="link" href="https://help.github.com/articles/user-organization-and-project-pages/"  target="_blank" rel="noopener"
    >see here 98</a> for the difference) and that your remote is called ‚Äúupstream‚Äù.</p>
<h2 id="publish-from-docs-folder-on-master-branch">Publish from /docs folder on master branch</h2>
<p><a class="link" href="https://help.github.com/articles/configuring-a-publishing-source-for-github-pages/#publishing-your-github-pages-site-from-a-docs-folder-on-your-master-branch"  target="_blank" rel="noopener"
    >As described 48</a> in the GitHub Pages docs, you can deploy from a folder called <em>docs</em> on your master branch. This requires to change the Hugo publish directory in the site config:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">publishDir: &#34;docs&#34;
</code></pre></td></tr></table>
</div>
</div><p>After running <code>hugo</code>, push your master branch to the upstream repo and choose the docs folder as the website source (&ldquo;Settings &quot; -&gt; ‚ÄúGitHub Pages‚Äù -&gt; ‚ÄúSource‚Äù -&gt; ‚Äúmaster branch /docs folder‚Äù). If that option isn‚Äôt enabled, you like haven‚Äôt pushed your <em>docs</em> folder yet.</p>
<p>This is the simplest approach but requires the usage of a non-standard publish directory (GitHub Pages cannot be configured to use another directory than <em>docs</em> currenty). Also the presence of generated files on the master branch may not be to eveyone‚Äôs taste.</p>
<h2 id="deployment-to-gh-pages-branch">Deployment to gh-pages branch</h2>
<p>The easiest way to sync the state of the <em>public</em> directory with your ‚Äúgh-pages‚Äù branch is to create a clone of your repo under <em>public</em>, commit the changes and push them to the ‚Äúgh-pages‚Äù branch in your local repo:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"># remove previous publication
rm -rf public
mkdir public

# clone gh-pages branch from the local repo into a repo located within &#34;public&#34;
git clone .git --branch gh-pages public
  
# generate
hugo
  
# commit the changes in the clone and push them back to the local gh-pages branch    
cd public &amp;&amp; git add --all &amp;&amp; git commit -m &#34;Publishing to gh-pages&#34; &amp;&amp; git push origin gh-pages

# publish
git push upstream gh-pages
</code></pre></td></tr></table>
</div>
</div><p>That‚Äôs my preferred approach as it keeps sources and generated HTML in two different branches, uses the default <em>public</em> folder and also keeps the histories of source branch and ‚Äúgh-pages‚Äù branch fully separated from each other (unlike the subtree approach). Don‚Äôt forget to add <em>public</em> to your <em>.gitignore</em> file.</p>
<p>I‚Äôm using a script which does this plus a few sanity checks (work area is clean etc.) which you can find in <a class="link" href="https://github.com/lj020326/dettonville.org/blob/main/scripts/publish.sh"  target="_blank" rel="noopener"
    >my repo</a>.</p>
<p>Note that if you are on Git 2.5 or later, the new worktree feature can be used alternatively, avoiding the cloning of the repo:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">git worktree add -B gh-pages public upstream/gh-pages
</code></pre></td></tr></table>
</div>
</div><p>This checks out the ‚Äúgh-pages‚Äù branch into <em>public</em>, but it‚Äôs linked to the local repo. I.e. if you commit the changes in <em>public</em> that affects the local ‚Äúgh-pages‚Äù branch directly, no further push is needed.</p>
<ul>
<li>
<h4 id="created">created</h4>
<p>Jan &lsquo;17</p>
</li>
<li>
<p>[</p>
<h4 id="last-reply">last reply</h4>
<p>](<a class="link" href="https://discourse.gohugo.io/t/simple-deployment-to-gh-pages/5003/6"  target="_blank" rel="noopener"
    >https://discourse.gohugo.io/t/simple-deployment-to-gh-pages/5003/6</a>)</p>
<p><a class="link" href="https://discourse.gohugo.io/t/simple-deployment-to-gh-pages/5003/6"  target="_blank" rel="noopener"
    ></a>Jul &lsquo;17</p>
</li>
<li>
<p>7.8k</p>
<h4 id="views">views</h4>
</li>
<li>
<p>4</p>
<h4 id="users">users</h4>
</li>
<li>
<p>3</p>
<h4 id="likes">likes</h4>
</li>
<li>
<p>5</p>
<h4 id="links">links</h4>
</li>
<li>
<p><img src="https://sjc6.discourse-cdn.com/standard10/user_avatar/discourse.gohugo.io/rdwatters/64/2848_2.png"
	
	
	
	loading="lazy"
	
	
></p>
<p><img src="https://sjc6.discourse-cdn.com/standard10/user_avatar/discourse.gohugo.io/okabrionz/64/2853_2.png"
	
	
	
	loading="lazy"
	
	
></p>
</li>
</ul>
<p><a class="link" href="https://discourse.gohugo.io/u/gunnarmorling"  target="_blank" rel="noopener"
    >@gunnarmorling</a> This is good stuff and much simple than the gut modules. I think that tutorial was written before a lot of GitHub pages recent improvements (they now make it so that you can basically make any repo a GH Pages site with the click of a button). I think your pointers would be a good addition to the docs.</p>
<p>Thanks! I‚Äôll see whether I can file a pull request for the doc page on GH deployment.</p>
<p>Please file a PR. And just replace the page that is there already. I wrote the part about sub trees, and I guess most of it is out of date by now. And it is good to not give the users too many options. Confuses them.</p>
<p>Delete public folder &gt; create a new empty public folder &gt; clone gh-pages /.git into the public folder &gt; push the public folder to the gh-pages. This method is so simple.<br>
Do you have any ideas about How to make it quickly I mean (1-click publish to gh-pages)?</p>
<h3 id="hello-looks-like-youre-enjoying-the-discussion-but-you-havent-signed-up-for-an-account-yet">Hello! Looks like you‚Äôre enjoying the discussion, but you haven‚Äôt signed up for an account yet.</h3>
<p>When you create an account, we remember exactly what you‚Äôve read, so you always come right back where you left off. You also get notifications, here and via email, whenever someone replies to you. And you can like posts to share the love. <img src="https://emoji.discourse-cdn.com/twitter/heartpulse.png?v=12"
	
	
	
	loading="lazy"
	
		alt="heartpulse"
	
	
></p>

</section>


    <footer class="article-footer">
    

    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>MIT</span>
    </section>
    </footer>


    
</article>

    

    

     
    
        
    <script src="https://utteranc.es/client.js" 
        repo="dettonville/blog"
        issue-term="pathname"
        
        label="comment"
        
        crossorigin="anonymous"
        async
        >
</script>

<style>
    .utterances {
        max-width: unset;
    }
</style>

<script>
    function setUtterancesTheme(theme) {
        let utterances = document.querySelector('.utterances iframe');
        if (utterances) {
            utterances.contentWindow.postMessage(
                {
                    type: 'set-theme',
                    theme: `github-${theme}`
                },
                'https://utteranc.es'
            );
        }
    }

    addEventListener('message', event => {
        if (event.origin !== 'https://utteranc.es') return;
        setUtterancesTheme(document.documentElement.dataset.scheme)
    });

    window.addEventListener('onColorSchemeChange', (e) => {
        setUtterancesTheme(e.detail)
    })
</script>


    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
        2022 Infra Coder
    </section>
    
    <section class="powerby">
        Built with InfraCoder <br />
        Theme <b><a href="https://github.com/lj020326/blog-master" target="_blank" rel="noopener" data-version="3.9.0">BlogMaster</a></b> designed by <a href="https://dettonville.com" target="_blank" rel="noopener">Dettonville</a>
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css"integrity="sha256-c0uckgykQ9v5k&#43;IqViZOZKc47Jn7KQil4/MP3ySA3F8="crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css"integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE="crossorigin="anonymous"
            >

            </main>
    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">Table of contents</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#publish-from-docs-folder-on-master-branch">Publish from /docs folder on master branch</a></li>
    <li><a href="#deployment-to-gh-pages-branch">Deployment to gh-pages branch</a>
      <ol>
        <li>
          <ol>
            <li><a href="#created">created</a></li>
            <li><a href="#last-reply">last reply</a></li>
            <li><a href="#views">views</a></li>
            <li><a href="#users">users</a></li>
            <li><a href="#likes">likes</a></li>
            <li><a href="#links">links</a></li>
          </ol>
        </li>
        <li><a href="#hello-looks-like-youre-enjoying-the-discussion-but-you-havent-signed-up-for-an-account-yet">Hello! Looks like you‚Äôre enjoying the discussion, but you haven‚Äôt signed up for an account yet.</a></li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js"integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
